# PahoTest - MQTT Data Logger

–ü—Ä–æ–µ–∫—Ç –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö —Å MQTT –±—Ä–æ–∫–µ—Ä–∞ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏—Ö –≤ —Ñ–æ—Ä–º–∞—Ç–∞—Ö JSON –∏ XML.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ MQTT –±—Ä–æ–∫–µ—Ä—É
- –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Å –¥–∞—Ç—á–∏–∫–æ–≤:
  - –û—Å–≤–µ—â–µ–Ω–Ω–æ—Å—Ç—å (Illuminance)
  - –î–≤–∏–∂–µ–Ω–∏–µ (Motion) 
  - –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ (Temperature)
  - –ó–≤—É–∫ (Sound)
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ –¥–≤—É—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö:
  - **JSON** - —Ñ–∞–π–ª `data.json`
  - **XML** - —Ñ–∞–π–ª `data.xml`

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
src/main/java/ru/mosit/pahotest/
‚îú‚îÄ‚îÄ PahoTest.java              # –û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å —Å MQTT –∫–ª–∏–µ–Ω—Ç–æ–º
‚îú‚îÄ‚îÄ TestDataFormats.java       # –¢–µ—Å—Ç–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ —Ñ–æ—Ä–º–∞—Ç–æ–≤
‚îú‚îÄ‚îÄ InstantConverter.java      # –ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä –¥–ª—è JSON —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ Instant
‚îú‚îÄ‚îÄ XmlInstantConverter.java   # –ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä –¥–ª—è XML —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ Instant
‚îî‚îÄ‚îÄ data/
    ‚îú‚îÄ‚îÄ JsonData.java          # –ö–ª–∞—Å—Å –¥–∞–Ω–Ω—ã—Ö –¥–ª—è JSON
    ‚îú‚îÄ‚îÄ XmlData.java           # –ö–ª–∞—Å—Å –¥–∞–Ω–Ω—ã—Ö –¥–ª—è XML
    ‚îú‚îÄ‚îÄ XmlDataList.java       # –û–±–µ—Ä—Ç–∫–∞ –¥–ª—è —Å–ø–∏—Å–∫–∞ XML –¥–∞–Ω–Ω—ã—Ö
    ‚îî‚îÄ‚îÄ Topic.java             # Enum —Å —Ç–æ–ø–∏–∫–∞–º–∏ MQTT
```

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- **Eclipse Paho MQTT Client** - –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å MQTT
- **Gson** - –¥–ª—è JSON —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏
- **JAXB** - –¥–ª—è XML —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏
- **Lombok** - –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è –∫–æ–¥–∞

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### 1. –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö —Å MQTT
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ MQTT –±—Ä–æ–∫–µ—Ä –Ω–∞ `192.168.1.12:1883`
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö:
   ```bash
   ./gradlew run -PmainClass=ru.mosit.pahotest.PahoTest
   ```
3. –î–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç —Å–æ—Ö—Ä–∞–Ω—è—Ç—å—Å—è –≤ —Ñ–∞–π–ª—ã `data.json` –∏ `data.xml`

### 2. –ü–∞—Ä—Å–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö
–ó–∞–ø—É—Å—Ç–∏—Ç–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –ø–∞—Ä—Å–µ—Ä:
```bash
./gradlew run -PmainClass=ru.mosit.pahotest.DataParser
```

### 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–∞—Ä—Å–µ—Ä–∞ —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏:
```bash
./gradlew run -PmainClass=ru.mosit.pahotest.TestParser
```

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–∞—Ä—Å–µ—Ä–∞

- üìÑ **–ß—Ç–µ–Ω–∏–µ JSON —Ñ–∞–π–ª–æ–≤** - –ø–∞—Ä—Å–∏–Ω–≥ –∏ –∫—Ä–∞—Å–∏–≤–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ `data.json`
- üìÑ **–ß—Ç–µ–Ω–∏–µ XML —Ñ–∞–π–ª–æ–≤** - –ø–∞—Ä—Å–∏–Ω–≥ –∏ –∫—Ä–∞—Å–∏–≤–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ `data.xml`
- üìä **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–∞–π–ª–∞—Ö** - —Ä–∞–∑–º–µ—Ä, –¥–∞—Ç–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è, —Å—Ç–∞—Ç—É—Å —Ñ–∞–π–ª–æ–≤
- üé® **–ö—Ä–∞—Å–∏–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** - —Ç–∞–±–ª–∏—á–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Å —ç–º–æ–¥–∑–∏ –∏ —Ä–∞–º–∫–∞–º–∏
- ‚ö° **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –º–µ–Ω—é** - —É–¥–æ–±–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Ñ—É–Ω–∫—Ü–∏—è–º

## –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö

### JSON
```json
[
  {
    "illuminance": 25.5,
    "motion": 1,
    "temperature": 22.3,
    "sound": 45.2,
    "date": "2024-01-15T10:30:00Z",
    "caseNumber": 1
  }
]
```

### XML
```xml
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<sensorDataList>
    <sensorData>
        <illuminance>25.5</illuminance>
        <motion>1</motion>
        <temperature>22.3</temperature>
        <sound>45.2</sound>
        <date>2024-01-15T10:30:00Z</date>
        <caseNumber>1</caseNumber>
    </sensorData>
</sensorDataList>
```
